<h2><%= @user.name %></h2>

<% if flash[:message] %>
  <h6><%= flash[:message] %></h3>
<% end %>

<form method="post" action="tasks/mass-update">
  <input type="hidden" name="_method" value="patch">
  <% @user.tasks.sort_by(&:size).each do |task| %>
    <div class="task-wrapper">
      <div class="left-column">
        <div class="category">
          <h3><%= task.category %></h3>
        </div>
        <div class="size">
          <h3><%= task.size %></h3>
        </div>
      </div>
      
      <div class="content-column">
        <div class="task-name">
          <h3><%= task.name %> (<a href="/tasks/<%= task.id %>/edit">edit</a>)</h3>
        </div>
        <div class="task-notes">
          <ul>
          <% task.notes.each do |note|%>
          <li><%= note.content %></li>
          <% end %></ul>
        </div>
      </div>


      <div class="dates-column">
        <div class="due-date">
          <h4>due: 
            <% if task.due_date != "" && task.due_date != nil%>
              <%= task.due_date.strftime("%m/%d") %>
            <% else %>
              none
            <% end %></h4><br>
        </div>
        <div class="do-date">
          <h4><label for="do_date[<%= task.id %>]">do:</label><input type=date name= "do_date[<%= task.id %>]" value="<%= task.do_date %>">
          </h4>
        </div>
      </div>
      
      <div class="right-column">
        <div class="mark-complete">
          <h4><input type="checkbox" name="complete[<%= task.id %>]"><label for="complete[<%= task.id %>]"> done</label></h4><br>
        </div>
        <div class="new-note">
          <h4>add note:</h4>
          <textarea rows="3" class="note-textarea" name="new-note[<%= task.id %>]"></textarea>
        </div>
      </div>
    </div>
  <% end %>
  <input type="submit" value="update all">
</form>


